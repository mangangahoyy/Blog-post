---
layout: post
title: Simple Real-Time Chat-App using Socket Programming in Python!
---

Using the socket application, I will be making a basic real-time chat application for our Event Driven Programming activity. Basically, messages are sent over a network using sockets and the socket API.

# Server-side 
---

## 1. Let's first import Libraries.

```
import socket
import threading
```

## 2. Let's configure the server next.

```
HOST = '127.0.0.1'
PORT = 55555
```
While the **PORT** will be the server port number, the **HOST** defines the IP address.

## 3. Now, let's create a Socket.
```
server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
```
This socket is designated as IPv4 by **AF_INET** and as a TCP socket for handling streams of data by **SOCK_STREAM**.

## 4. Let's now use the ***bind()*** and ***listen()*** functions.
```
server_socket.bind((HOST, PORT))
server_socket.listen()
```
The server begins listening for incoming connections after binding the socket to a particular address and port.

## 5. List for storing clients
```
clients = []
```
In order for the server to be able to monitor the number of clients attempting to connect.

## 6. With the exception of the client that sent the message, this function informs all connected clients of the message.
```
def broadcast(message, client_socket):
    for client in clients:
        if client != client_socket:
            try:
                client.send(message)
            except:
                clients.remove(client)
```

## 7. This function distributes messages from a particular client to all other clients while it is continuously listening for new ones.
```
def handle_client(client_socket):
    while True:
        try:
            message = client_socket.recv(1024)
            if not message:
                clients.remove(client_socket)
                break
            broadcast(message, client_socket)
        except:
            clients.remove(client_socket)
            break
```

## 8.  Acceping Clients
```
while True:
    client_socket, address = server_socket.accept()
    clients.append(client_socket)
    thread = threading.Thread(target=handle_client, args=(client_socket,))
    thread.start()
```
In order for the server to continue operating while it waits for more clients to connect, we will create a **while loop**. It acknowledges and ***adds a new client*** to the list whenever one connects.

### In its simplest form, the server is the one that watches out for users. A new thread is started to handle the messages from a connected client, and the client is added to the list. Every message sent by a client is continuously monitored by the server, which then broadcasts it to all other clients that are connected.

---

# Client-side 
---

## 1. Let's first import Libraries.
```
import socket
import threading
import tkinter as tk
from tkinter import scrolledtext, END, simpledialog
```
- **socket**: creating and managing sockets
- **threading**: this module allows us to run multiple threads at the same time
- **tkinter**: we will be needing this so that we can create a GUI for the app
- **scrolledtext**: it is a widget so that we can scroll the text area
- **simpledialog**: we can use this to create a dialog for inputs such as username

## 2. Let's configure the client next.
```
HOST = '127.0.0.1'
PORT = 55555
```
While the **PORT** will be the client port number, the **HOST** defines the IP address. Same with the server.

## 3. Simpledialog to get client's username
```
username = simpledialog.askstring("Username", "Enter your username:", parent=tk.Tk())
```
It will display a dialog box with the simpledialog_asktring so that the client can enter any username they choose.

## 4. Creating socket and connecting it to the server
```
client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client_socket.connect((HOST, PORT))
```
- **socket.socket**: to create new sockets
- **socket.AF_INET**: to know that this belong to IPV4 address
- **socket.SOCK_STREAM**: so that we can identify what type of socket it is, it is a TCP socket.
- **connect((HOST, PORT))**: to basically set up the connection to the server






